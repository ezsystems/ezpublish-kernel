# Use trusty for better performance (and avoiding mysql/postgres/solr gone issues on precise and container infra)
dist: trusty
sudo: required
language: php


matrix:
  include:
    - php: 7.0
      group: deprecated
    - php: 7.0
      group: stable


# test only master, stable branches and pull requests
branches:
  only:
    - master
    - /^\d.\d+$/

before_script:
  - composer selfupdate --snapshot

# execute phpunit or behat as the script command
script:
  - git --version
  - git branch --no-color --no-abbrev -v
  - git describe --exact-match --tags
  - git log --pretty="%H" -n1 HEAD
  - git rev-list travis_debug..master
  - composer show -s


# disable mail notifications
notifications:
  email: false

# reduce depth (history) of git checkout
git:
  depth: 30
