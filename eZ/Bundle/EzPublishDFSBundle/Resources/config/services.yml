parameters:
    ezpublish.core.io.dfs.io_handler.factory.class: eZ\Bundle\EzPublishDFSBundle\ApiLoader\DFSFactory
    ezpublish.core.io.dfs.io_handler.class: eZ\Publish\Core\IO\Handler\DFS
    ezpublish.core.io.dfs.metadata_handler.legacy_dfs_cluster.class: eZ\Publish\Core\IO\Handler\DFS\MetadataHandler\LegacyDFSCluster
    ezpublish.core.io.dfs.binarydata_handler.flysystem.class: eZ\Publish\Core\IO\Handler\DFS\BinaryDataHandler\FlySystem
    ezpublish.core.io.dfs.url_decorator.prefix.class: eZ\Publish\Core\IO\Handler\DFS\UrlDecorator\Prefix
    ezpublish.core.io.dfs.stream_file_listener.class: eZ\Bundle\EzPublishDFSBundle\EventListener\StreamFileListener

services:
    ezpublish.core.io.dfs.io_handler.factory:
        class: %ezpublish.core.io.dfs.io_handler.factory.class%
        arguments: [@ezpublish.config.resolver]

    ezpublish.core.io.dfs.io_handler:
        class: %ezpublish.core.io.dfs.io_handler.class%
        abstract: true
        factory_service: ezpublish.core.io.dfs.io_handler.factory
        factory_method: buildDFSIOHandler
        arguments: [~, ~]

    ezpublish.core.io.dfs.metadata_handler.legacy_dfs_cluster:
        class: %ezpublish.core.io.dfs.metadata_handler.legacy_dfs_cluster.class%
        abstract: true
        arguments: [~]

    ezpublish.core.io.dfs.binarydata_handler.flysystem:
        class: %ezpublish.core.io.dfs.binarydata_handler.flysystem.class%
        abstract: true
        arguments: [~, ~]

    ezpublish.core.io.dfs.url_decorator.prefix:
        class: %ezpublish.core.io.dfs.url_decorator.prefix.class%
        arguments: [~]

    ezpublish.core.io.dfs.stream_file_listener:
        class: %ezpublish.core.io.dfs.stream_file_listener.class%
        arguments:
            - @ezpublish.fieldtype.ezimage.io
        tags:
            - { name: kernel.event_subscriber }
